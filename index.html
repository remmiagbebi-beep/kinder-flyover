<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Kinder Scout 3D Flyover</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css" rel="stylesheet" />
  <style>
    html,body{margin:0;height:100%;background:#000;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;}
    #map{position:absolute;inset:0;}
    .ui{position:absolute;top:50%;right:20px;transform:translateY(-50%);z-index:10;display:flex;flex-direction:column;gap:18px}
    .btn{width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid #fff;cursor:pointer;user-select:none;transition:.15s;background:linear-gradient(180deg,#EC2629,#b51d20);box-shadow:0 3px 10px rgba(0,0,0,.35)}
    .btn:hover{background:linear-gradient(180deg,#3899EC,#297fc8)}
    .btn svg{fill:#fff;width:24px;height:24px;display:none}
    .btn svg.active{display:block}
    .speed-wrap{position:relative;width:50px;height:50px}
    .speed-panel{position:absolute;top:50%;right:60px;transform:translateY(-50%) scale(.98);opacity:0;pointer-events:none;width:230px;height:50px;display:flex;align-items:center;gap:12px;padding:0 14px;border-radius:9999px;border:3px solid #fff;background:linear-gradient(180deg,#EC2629,#b51d20);box-shadow:0 3px 10px rgba(0,0,0,.35);transition:opacity .18s,transform .18s}
    .speed-wrap.open .speed-panel{opacity:1;transform:translateY(-50%) scale(1);pointer-events:auto}
    .speed-icon{width:22px;height:22px;fill:#fff;flex:0 0 auto}
    .speed-slider{flex:1;appearance:none;height:6px;border-radius:999px;outline:none;background:linear-gradient(90deg,#fff,#fff8)}
    .speed-slider::-webkit-slider-thumb{appearance:none;width:18px;height:18px;border-radius:50%;background:#fff;border:2px solid #EC2629;box-shadow:0 2px 8px rgba(0,0,0,.25);cursor:pointer}
  </style>
</head>
<body>
  <div id="map"></div>

  <div class="ui">
    <!-- Play / Pause -->
    <button id="btnToggle" class="btn" aria-label="Play">
      <svg id="iconPlay" class="active" viewBox="0 0 24 24">
        <polygon transform="translate(1,0)" points="5,3 19,12 5,21"/>
      </svg>
      <svg id="iconPause" viewBox="0 0 24 24">
        <rect x="6" y="4" width="5" height="16" rx="1.5"/><rect x="13" y="4" width="5" height="16" rx="1.5"/>
      </svg>
    </button>

    <!-- Camera button -->
    <button id="btnCam" class="btn" aria-label="Camera mode">
      <svg id="iconCamCine" viewBox="0 0 24 24" class="active">
        <rect x="3" y="7" width="11" height="10" rx="2"></rect>
        <polygon points="16,10 22,7.5 22,16.5 16,14"></polygon>
      </svg>
      <svg id="iconCamBird" xmlns="http://www.w3.org/2000/svg" viewBox="4.3333375 6.3333375 43.875 40.375" style="transform:translate(1px,1px)">
        <path d="M41.965,20.694c-0.495-2.083-2.273-3.54-4.182-3.54c-1.816,0-3.717,1.149-5.184,2.522c-3.911-5.328-9.661-9.706-13.112-12.527c-0.713,1.656-1.029,3.449-1.029,5.271c0,1.999,0.395,4.832,1.042,6.768L26,19.667H5.121c2.5,5.762,7.472,9.976,13.329,12.333c-3.699,2.583-6.778,4.415-10.271,6.815c2.034,2.034,3.384,2.935,6.606,4.035c2.205-3.185,3.991-5.396,5.582-7.654c2.219,0.988,4.734,1.532,7.207,1.532c11.183,0,14.263-12.188,14.509-14.603c0.972-0.161,1.946-0.328,2.918-0.455C43.971,21.4,42.953,21.075,41.965,20.694z M38.863,20.814c-0.426,0-0.769-0.345-0.769-0.769c0-0.426,0.343-0.768,0.769-0.768c0.424,0,0.769,0.342,0.769,0.768C39.632,20.469,39.287,20.814,38.863,20.814z" fill="#fff"></path>
      </svg>
      <svg id="iconCamFree" viewBox="0 0 24 24"></svg>
    </button>

    <!-- Speed button -->
    <div class="speed-wrap" id="speedWrap">
      <button id="btnSpeed" class="btn" aria-label="Speed">
        <svg class="speed-icon" viewBox="0 0 24 24" style="display:block">
          <circle cx="17.5" cy="5.5" r="2.2" fill="#fff"/>
          <path d="M12.2 9.2l2.4-1.8c.7-.5 1.6-.4 2.2.2l1.6 1.6-1.4 1.4-1.3-1.3-1.9 1.4 1.7 2.9 3.1.9-.5 1.9-3.9-1.1c-.5-.1-.9-.4-1.1-.8l-1.6-2.7-1.1 2.3c-.2.4-.5.7-1 .8L7 15.7l1.2 3.2H6.1L4.4 13l3.8-1.2 1.5-3.2 2.5.6z" fill="#fff"/>
        </svg>
      </button>
      <div class="speed-panel" id="speedPanel">
        <svg class="speed-icon" viewBox="0 0 24 24" aria-hidden="true">
          <circle cx="17.5" cy="5.5" r="2.2" fill="#fff"/>
          <path d="M12.2 9.2l2.4-1.8c.7-.5 1.6-.4 2.2.2l1.6 1.6-1.4 1.4-1.3-1.3-1.9 1.4 1.7 2.9 3.1.9-.5 1.9-3.9-1.1c-.5-.1-.9-.4-1.1-.8l-1.6-2.7-1.1 2.3c-.2.4-.5.7-1 .8L7 15.7l1.2 3.2H6.1L4.4 13l3.8-1.2 1.5-3.2 2.5.6z" fill="#fff"/>
        </svg>
        <input id="speed" class="speed-slider" type="range" min="0.1" max="5" step="0.05" value="0.45"/>
      </div>
    </div>
  </div>

  <!-- JS (same logic as before) -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6.5.0/turf.min.js"></script>
  <script src="https://unpkg.com/@tmcw/togeojson@5.8.0/dist/togeojson.umd.js"></script>
  <script>
  // (your same JS logic for map and controls here â€” unchanged)
  </script>
</body>
</html>
