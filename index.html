<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Kinder Scout 3D Flyover</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css" rel="stylesheet" />

  <style>
    html,body{
      margin:0;
      height:100%;
      background:#000;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif
    }
    #map{ position:absolute; inset:0 }

    .ui{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      z-index:10;
      display:flex;
      flex-direction:column;
      gap:18px;
    }
    .ui-right{ right:20px; }
    .ui-left{ left:20px; }

    .btn{
      width:50px;
      height:50px;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      border:3px solid #fff;
      cursor:pointer;
      background:linear-gradient(180deg,#EC2629,#b51d20);
      box-shadow:0 3px 10px rgba(0,0,0,.35);
      transition:.15s;
    }
    .btn:hover{
      background:linear-gradient(180deg,#3899EC,#297fc8);
    }

    .btn svg{
      fill:#fff;
      width:24px;
      height:24px;
      display:block;
    }

    #iconSpeed{
      width:18px !important;
      height:18px !important;
    }

    .speed-wrap{ position:relative; width:50px; height:50px }

    .speed-panel{
      position:absolute;
      top:50%;
      right:60px;
      transform:translateY(-50%) scale(.98);
      opacity:0;
      pointer-events:none;
      width:230px;
      height:45px;
      display:flex;
      align-items:center;
      gap:12px;
      padding:0 10px;
      border-radius:9999px;
      border:3px solid #fff;
      background:linear-gradient(180deg,#EC2629,#b51d20);
      transition:opacity .18s,transform .18s;
      box-shadow:0 3px 10px rgba(0,0,0,.35);
    }
    .speed-wrap.open .speed-panel{
      opacity:1;
      transform:translateY(-50%) scale(1);
      pointer-events:auto;
    }

    .speed-slider{
      flex:1;
      appearance:none;
      height:6px;
      border-radius:999px;
      background:linear-gradient(90deg,#fff,#fff8);
    }
    .speed-slider::-webkit-slider-thumb{
      appearance:none;
      width:18px;
      height:18px;
      border-radius:50%;
      background:#fff;
      border:2px solid #EC2629;
      box-shadow:0 2px 8px rgba(0,0,0,.25);
      cursor:pointer;
    }
  </style>
</head>

<body>
<div id="map"></div>

<!-- LEFT SIDE -->
<div class="ui ui-left">

  <!-- Play / Pause -->
  <button id="btnToggle" class="btn">
    <svg id="iconPlay" viewBox="0 0 24 24">
      <polygon transform="translate(1,0)" points="5,3 19,12 5,21"></polygon>
    </svg>
    <svg id="iconPause" viewBox="0 0 24 24" style="display:none">
      <rect x="6" y="4" width="5" height="16" rx="1.5"></rect>
      <rect x="13" y="4" width="5" height="16" rx="1.5"></rect>
    </svg>
  </button>

  <!-- Restart -->
  <button id="btnRestart" class="btn">
    <svg id="iconRestart" viewBox="0 0 24 24" style="transform:translateX(2px)">
      <path d="M5 4v5h5" fill="none" stroke="#fff" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round"></path>
      <path d="M5 9a7 7 0 1 1-1.5 4.3" fill="none" stroke="#fff" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round"></path>
    </svg>
  </button>

  <!-- Reset View (INLINE SVG – ALWAYS WORKS) -->
  <button id="btnReset" class="btn">
    <svg id="iconResetView" viewBox="0 0 512 512" style="width:24px;height:24px">
      <path d="M319.63,191.33l-5.34-19.8c-1.88-6.98-8.22-11.83-15.45-11.83h-88.12c-7.23,0-13.56,4.85-15.45,11.83l-5.34,19.8h-38.06
      c-8.84,0-16,7.16-16,16V336.3c0,8.84,7.16,16,16,16h205.81c8.84,0,16-7.16,16-16V207.33c0-8.84-7.16-16-16-16H319.63z
      M341.68,320.3H167.88v-96.97h34.31c7.23,0,13.56-4.85,15.45-11.83l5.34-19.8h63.61l5.34,19.8c1.88,6.98,8.22,11.83,15.45,11.83
      h34.31V320.3z" fill="#fff"/>

      <path d="M254.78,217.5c-25.61,0-46.45,20.84-46.45,46.45s20.84,46.45,46.45,46.45s46.45-20.84,46.45-46.45
      S280.39,217.5,254.78,217.5z M254.78,278.4c-7.97,0-14.45-6.48-14.45-14.45s6.48-14.45,14.45-14.45s14.45,6.48,14.45,14.45
      S262.75,278.4,254.78,278.4z" fill="#fff"/>

      <path d="M46.29,265.58c4.7,4.58,8.76,8.54,15.63,8.65c4.24,0,8.36-1.7,11.36-4.7l29.43-29.43l-21.56-21.56
      c17.24-79.88,88.43-139.92,173.39-139.92c67.45,0,128.2,37.45,158.54,97.74c3.97,7.89,13.59,11.07,21.49,7.1
      c7.89-3.97,11.07-13.59,7.1-21.49c-33.31-20.96-71.82-32.03-111.35-32.03c-103.76,0-190.11,75.87-206.55,175.03
      c-6.06-6.43-16.19-6.73-22.62-0.67c-6.43,6.06-6.73,16.19-0.67,22.62C40.85,260.18,43.96,263.31,46.29,265.58z" fill="#fff"/>

      <path d="M457.84,217.49c-3.06-3.06-7.29-4.77-11.6-4.7c-2.58,0.04-4.77,0.62-6.74,1.58c-0.65,0.36-1.28,0.76-1.87,1.2
      c-2.33,2.27-5.43,5.41-9.22,9.31c-6.35,6.55-12.42,12.98-12.67,13.25c-6.06,6.43-5.76,16.56,0.67,22.62
      c6.38,6.02,16.41,5.76,22.48-0.54c-5.24,93.14-82.66,167.31-177.09,167.31c-78.34,0-146.47-50.24-169.53-125.02
      c-8.44,2.6-13.18,11.56-10.57,20.01c12.91,41.85,39.42,79.44,74.63,105.84c36.43,27.31,79.82,41.75,125.48,41.75
      c111.2,0,202.42-87.14,208.99-196.72l0.88,0.88c3.12,3.12,7.22,4.69,11.31,4.69s8.19-1.56,11.31-4.69
      c6.25-6.25,6.25-16.38,0-22.63L457.84,217.49z" fill="#fff"/>
    </svg>
  </button>

  <!-- Camera -->
  <button id="btnCam" class="btn">
    <svg id="iconCamCine" viewBox="0 0 24 24">
      <rect x="3" y="7" width="11" height="10" rx="2"></rect>
      <polygon points="16,10 22,7.5 22,16.5 16,14"></polygon>
    </svg>

    <svg id="iconCamBird" viewBox="4.3333375 6.3333375 43.875 40.375" style="display:none">
      <path fill="#fff" d="M41.965,20.694c-0.495-2.08…"></path>
    </svg>
  </button>
</div>

<!-- RIGHT SIDE -->
<div class="ui ui-right">

  <button id="btnFull" class="btn">
    <svg id="iconFull" viewBox="0 0 24 24">
      <polyline points="4,9 4,4 9,4" fill="none" stroke="#fff" stroke-width="2"></polyline>
      <polyline points="20,9 20,4 15,4" fill="none" stroke="#fff" stroke-width="2"></polyline>
      <polyline points="4,15 4,20 9,20" fill="none" stroke="#fff" stroke-width="2"></polyline>
      <polyline points="20,15 20,20 15,20" fill="none" stroke="#fff" stroke-width="2"></polyline>
    </svg>
  </button>

  <button id="btnZoomIn" class="btn">
    <svg id="iconZoomIn" viewBox="0 0 24 24">
      <circle cx="11" cy="11" r="7" stroke="#fff" stroke-width="2" fill="none"></circle>
      <line x1="11" y1="8" x2="11" y2="14" stroke="#fff" stroke-width="2"></line>
      <line x1="8" y1="11" x2="14" y2="11" stroke="#fff" stroke-width="2"></line>
      <line x1="16" y1="16" x2="21" y2="21" stroke="#fff" stroke-width="2"></line>
    </svg>
  </button>

  <button id="btnZoomOut" class="btn">
    <svg id="iconZoomOut" viewBox="0 0 24 24">
      <circle cx="11" cy="11" r="7" stroke="#fff" stroke-width="2" fill="none"></circle>
      <line x1="8" y1="11" x2="14" y2="11" stroke="#fff" stroke-width="2"></line>
      <line x1="16" y1="16" x2="21" y2="21" stroke="#fff" stroke-width="2"></line>
    </svg>
  </button>

  <button id="btnLayers" class="btn">
    <svg id="iconLayers" viewBox="0 0 24 24">
      <path d="M3 7l9-5 9 5-9 5-9-5zm0 5l9 5 9-5m-18 5l9 5 9-5" fill="#fff"/>
    </svg>
  </button>

  <div class="speed-wrap" id="speedWrap">
    <button id="btnSpeed" class="btn">
      <svg id="iconSpeed" viewBox="0 0 24 24" style="width:18px;height:18px">
        <path d="M4 5l8 7-8 7V5zm9 0l8 7-8 7V5z"></path>
      </svg>
    </button>

    <div class="speed-panel" id="speedPanel">
      <input id="speed" class="speed-slider" type="range" min="0.1" max="5" step="0.05" value="0.35">
    </div>
  </div>
</div>

<script src="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@turf/turf@6.5.0/turf.min.js"></script>
<script src="https://unpkg.com/@tmcw/togeojson@5.8.0/dist/togeojson.umd.js"></script>

<script>
// THE REST OF YOUR JAVASCRIPT CODE REMAINS EXACTLY THE SAME
// CAMERA, FOLLOWING, ROUTE ANIMATION, ZOOM, FULLSCREEN, ETC.
</script>

</body>
</html>
