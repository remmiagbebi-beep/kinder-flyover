<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Kinder Scout 3D Flyover</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css" rel="stylesheet" />

<style>
html,body{
  margin:0;
  height:100%;
  background:#000;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif
}
#map{ position:absolute; inset:0 }

.ui{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  z-index:10;
  display:flex;
  flex-direction:column;
  gap:18px;
}
.ui-right{ right:20px; }
.ui-left{ left:20px; }

.btn{
  width:50px;
  height:50px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  border:3px solid #fff;
  cursor:pointer;
  background:linear-gradient(180deg,#EC2629,#b51d20);
  box-shadow:0 3px 10px rgba(0,0,0,.35);
  transition:.15s;
}
.btn:hover{
  background:linear-gradient(180deg,#3899EC,#297fc8);
}

.btn svg{
  fill:#fff;
  width:24px;
  height:24px;
  display:none;
}
.btn svg.active{ display:block }

#iconSpeed{
  width:18px !important;
  height:18px !important;
}

.speed-wrap{ position:relative; width:50px; height:50px }

.speed-panel{
  position:absolute;
  top:50%;
  right:60px;
  transform:translateY(-50%) scale(.98);
  opacity:0;
  pointer-events:none;
  width:230px;
  height:45px;
  display:flex;
  align-items:center;
  gap:12px;
  padding:0 10px;
  border-radius:9999px;
  border:3px solid #fff;
  background:linear-gradient(180deg,#EC2629,#b51d20);
  transition:opacity .18s,transform .18s;
  box-shadow:0 3px 10px rgba(0,0,0,.35);
}
.speed-wrap.open .speed-panel{
  opacity:1;
  transform:translateY(-50%) scale(1);
  pointer-events:auto;
}

.speed-slider{
  flex:1;
  appearance:none;
  height:6px;
  border-radius:999px;
  background:linear-gradient(90deg,#fff,#fff8);
  outline:none;
}
.speed-slider::-webkit-slider-thumb{
  appearance:none;
  width:18px;
  height:18px;
  border-radius:50%;
  background:#fff;
  border:2px solid #EC2629;
  box-shadow:0 2px 8px rgba(0,0,0,.25);
  cursor:pointer;
}
</style>
</head>

<body>
<div id="map"></div>

<!-- LEFT SIDE BUTTONS -->
<div class="ui ui-left">

  <button id="btnToggle" class="btn">
    <svg id="iconPlay" class="active" viewBox="0 0 24 24">
      <polygon transform="translate(1,0)" points="5,3 19,12 5,21"></polygon>
    </svg>
    <svg id="iconPause" viewBox="0 0 24 24">
      <rect x="6" y="4" width="5" height="16" rx="1.5"></rect>
      <rect x="13" y="4" width="5" height="16" rx="1.5"></rect>
    </svg>
  </button>

  <button id="btnRestart" class="btn">
    <svg id="iconRestart" class="active" viewBox="0 0 24 24" style="transform:translateX(2px)">
      <path d="M5 4v5h5" fill="none" stroke="#fff" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round"></path>
      <path d="M5 9a7 7 0 1 1-1.5 4.3" fill="none" stroke="#fff" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round"></path>
    </svg>
  </button>

  <!-- RESET BUTTON (PLACEHOLDER SVG ONLY) -->
  <button id="btnReset" class="btn">
    <svg id="iconResetView" class="active" width="24" height="24"></svg>
  </button>

  <button id="btnCam" class="btn">
    <svg id="iconCamCine" class="active" viewBox="0 0 24 24">
      <rect x="3" y="7" width="11" height="10" rx="2"></rect>
      <polygon points="16,10 22,7.5 22,16.5 16,14"></polygon>
    </svg>

    <svg id="iconCamBird" viewBox="4.3333375 6.3333375 43.875 40.375"
         style="transform:translate(1px,1px)">
      <path fill="#fff" d="M41.965,20.694c-0.495-2.083-2.273-3.54-4.182-3.54c-1.816,0-3.717,1.149-5.184,2.522
        c-3.911-5.328-9.661-9.706-13.112-12.527c-0.713,1.656-1.029,3.449-1.029,5.271c0,1.999,0.395,4.832,1.042,6.768L26,19.667H5.121
        c2.5,5.762,7.472,9.976,13.329,12.333c-3.699,2.583-6.778,4.415-10.271,6.815c2.034,2.034,3.384,2.935,6.606,4.035
        c2.205-3.185,3.991-5.396,5.582-7.654c2.219,0.988,4.734,1.532,7.207,1.532c11.183,0,14.263-12.188,14.509-14.603
        c0.972-0.161,1.946-0.328,2.918-0.455C43.971,21.4,42.953,21.075,41.965,20.694z"/>
    </svg>
  </button>

</div>

<!-- RIGHT SIDE -->
<div class="ui ui-right">
  <button id="btnFull" class="btn">
    <svg id="iconFull" class="active" viewBox="0 0 24 24">
      <polyline points="4,9 4,4 9,4" fill="none" stroke="#fff" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"></polyline>
      <polyline points="20,9 20,4 15,4" fill="none" stroke="#fff" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"></polyline>
      <polyline points="4,15 4,20 9,20" fill="none" stroke="#fff" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"></polyline>
      <polyline points="20,15 20,20 15,20" fill="none" stroke="#fff" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"></polyline>
    </svg>
  </button>

  <button id="btnZoomIn" class="btn">
    <svg id="iconZoomIn" class="active" viewBox="0 0 24 24">
      <circle cx="11" cy="11" r="7" stroke="#fff" stroke-width="2" fill="none"></circle>
      <line x1="11" y1="8" x2="11" y2="14" stroke="#fff" stroke-width="2"></line>
      <line x1="8" y1="11" x2="14" y2="11" stroke="#fff" stroke-width="2"></line>
      <line x1="16" y1="16" x2="21" y2="21" stroke="#fff" stroke-width="2"></line>
    </svg>
  </button>

  <button id="btnZoomOut" class="btn">
    <svg id="iconZoomOut" class="active" viewBox="0 0 24 24">
      <circle cx="11" cy="11" r="7" stroke="#fff" stroke-width="2" fill="none"></circle>
      <line x1="8" y1="11" x2="14" y2="11" stroke="#fff" stroke-width="2"></line>
      <line x1="16" y1="16" x2="21" y2="21" stroke="#fff" stroke-width="2"></line>
    </svg>
  </button>

  <button id="btnLayers" class="btn">
    <svg id="iconLayers" class="active"></svg>
  </button>

  <div class="speed-wrap" id="speedWrap">
    <button id="btnSpeed" class="btn">
      <svg id="iconSpeed" class="active" viewBox="0 0 24 24">
        <path d="M4 5l8 7-8 7V5zm9 0l8 7-8 7V5z"></path>
      </svg>
    </button>

    <div class="speed-panel" id="speedPanel">
      <input id="speed" class="speed-slider"
             type="range" min="0.1" max="5" step="0.05" value="0.35">
    </div>
  </div>
</div>

<script src="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@turf/turf@6.5.0/turf.min.js"></script>
<script src="https://unpkg.com/@tmcw/togeojson@5.8.0/dist/togeojson.umd.js"></script>

<script>

mapboxgl.accessToken="pk.eyJ1IjoicmVtbWlhZ2JlYmkiLCJhIjoiY21odHRrYTQzMTk0bjJqcjE1b2xhZ2FraSJ9.nTCz33gX0gQt3T4A6VD0oQ";

const START_ZOOM=15.7;
const CENTER_SMOOTH=0.06;
const MAX_TURN_RATE=4;
const STEP_KM=0.02;

function forceWhite(svg){
  svg.querySelectorAll("*").forEach(n=>{
    if(n.getAttribute("fill")!=="none") n.setAttribute("fill","#fff");
    if(n.hasAttribute("stroke")) n.setAttribute("stroke","#fff");
  });
}

/* SPEED ICON */
(async()=>{
  try{
    const r=await fetch("https://raw.githubusercontent.com/remmiagbebi-beep/kinder-flyover/main/icons/fast-forward.svg");
    const t=await r.text();
    const svg=new DOMParser().parseFromString(t,"image/svg+xml").querySelector("svg");
    if(svg){
      forceWhite(svg);
      svg.id="iconSpeed";
      svg.classList.add("active");
      svg.style.width="18px";
      svg.style.height="18px";
      document.getElementById("iconSpeed").replaceWith(svg);
    }
  }catch(e){}
})();

/* LAYERS ICON */
(async()=>{
  try{
    const r=await fetch("https://raw.githubusercontent.com/remmiagbebi-beep/kinder-flyover/main/icons/layers.svg");
    const t=await r.text();
    const svg=new DOMParser().parseFromString(t,"image/svg+xml").querySelector("svg");
    if(svg){
      forceWhite(svg);
      svg.id="iconLayers";
      svg.classList.add("active");
      svg.style.width="24px";
      svg.style.height="24px";
      document.getElementById("iconLayers").replaceWith(svg);
    }
  }catch(e){}
})();

/* RESET CAMERA ICON — THIS WAS MISSING UNTIL NOW */
(async()=>{
  try{
    const r=await fetch("https://raw.githubusercontent.com/remmiagbebi-beep/kinder-flyover/main/icons/reset-camera-view.svg");
    const t=await r.text();
    const svg=new DOMParser().parseFromString(t,"image/svg+xml").querySelector("svg");
    if(svg){
      forceWhite(svg);
      svg.id="iconResetView";
      svg.classList.add("active");
      svg.style.width="24px";
      svg.style.height="24px";
      document.getElementById("iconResetView").replaceWith(svg);
    }
  }catch(e){}
})();

/* ——— REMAINDER OF YOUR CODE UNCHANGED ——— */

const GPX_URL="https://ca60d944-6ce0-4824-b204-1ba31932152f.filesusr.com/ugd/a3a8b8_063190b585b948a6ad31077eef19e6fa.gpx";

/* MAP INITIALISATION, FLYOVER, CAMERA, ETC — unchanged */
… (your entire existing script continues here exactly as-is)

</script>

</body>
</html>
